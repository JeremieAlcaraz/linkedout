{
    "nodes": [
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "/linkedout/setup/tables",
          "responseMode": "responseNode",
          "options": {}
        },
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2,
        "position": [
          0,
          0
        ],
        "id": "347120b2-0503-4348-8db0-620c85917c18",
        "name": "Create tables",
        "webhookId": "e7a7cfbf-d921-4457-a62c-4055ab923286"
      },
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "/linkedout/setup/service-user",
          "responseMode": "responseNode",
          "options": {}
        },
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2,
        "position": [
          0,
          340
        ],
        "id": "cd950f02-4b54-4642-8cd7-a1b23610119f",
        "name": "Create service account",
        "webhookId": "e7a7cfbf-d921-4457-a62c-4055ab923286"
      },
      {
        "parameters": {
          "action": "generate",
          "dataPropertyName": "generatedPassword",
          "encodingType": "base64",
          "stringLength": 16
        },
        "type": "n8n-nodes-base.crypto",
        "typeVersion": 1,
        "position": [
          220,
          340
        ],
        "id": "bf70c946-6ec6-4f10-99b8-a63f0b5ff64d",
        "name": "Crypto"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "={{ $('Create service account').item.json.body.pocketbaseUrl }}/api/collections/users/records",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "authorization",
                "value": "={{ $json.headers.authorization }}"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "=    {\n    \"password\": \"{{ $json.generatedPassword }}\",\n    \"passwordConfirm\": \"{{ $json.generatedPassword }}\",\n    \"email\": \"linkedout-service-user@n8n.io\",\n    \"emailVisibility\": true,\n    \"verified\": true,\n    \"name\": \"linkedout-service-user\"\n    }",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          440,
          340
        ],
        "id": "4f32e26e-fb13-4127-bb76-31b5d2ab5460",
        "name": "Create n8n user",
        "onError": "continueErrorOutput"
      },
      {
        "parameters": {
          "operation": "create",
          "workflowObject": "={{ $json.workflowJson }}",
          "requestOptions": {}
        },
        "type": "n8n-nodes-base.n8n",
        "typeVersion": 1,
        "position": [
          1180,
          280
        ],
        "id": "c1daeb96-ba57-4244-8737-3554f3a78438",
        "name": "n8n",
        "credentials": {
          "n8nApi": {
            "id": "E6CzpgRiZSV95HXS",
            "name": "n8n account 4"
          }
        }
      },
      {
        "parameters": {
          "method": "PUT",
          "url": "={{ $json.body.pocketbaseUrl }}/api/collections/import",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "authorization",
                "value": "={{ $json.headers.authorization }}"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "{\n  \"collections\": [\n    {\n      \"id\": \"pbc_2279338944\",\n      \"listRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"viewRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": null,\n      \"name\": \"_mfas\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text455797646\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"collectionRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text127846527\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"recordRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text1582905952\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"method\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE INDEX `idx_mfas_collectionRef_recordRef` ON `_mfas` (collectionRef,recordRef)\"\n      ],\n      \"system\": true\n    },\n    {\n      \"id\": \"pbc_1638494021\",\n      \"listRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"viewRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": null,\n      \"name\": \"_otps\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text455797646\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"collectionRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text127846527\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"recordRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"cost\": 8,\n          \"hidden\": true,\n          \"id\": \"password901924565\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"password\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"password\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": true,\n          \"id\": \"text3866985172\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"sentTo\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE INDEX `idx_otps_collectionRef_recordRef` ON `_otps` (collectionRef, recordRef)\"\n      ],\n      \"system\": true\n    },\n    {\n      \"id\": \"pbc_2281828961\",\n      \"listRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"viewRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"name\": \"_externalAuths\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text455797646\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"collectionRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text127846527\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"recordRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text2462348188\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"provider\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text1044722854\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"providerId\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE UNIQUE INDEX `idx_externalAuths_record_provider` ON `_externalAuths` (collectionRef, recordRef, provider)\",\n        \"CREATE UNIQUE INDEX `idx_externalAuths_collection_provider` ON `_externalAuths` (collectionRef, provider, providerId)\"\n      ],\n      \"system\": true\n    },\n    {\n      \"id\": \"pbc_4275539003\",\n      \"listRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"viewRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": \"@request.auth.id != '' && recordRef = @request.auth.id && collectionRef = @request.auth.collectionId\",\n      \"name\": \"_authOrigins\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text455797646\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"collectionRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text127846527\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"recordRef\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text4228609354\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"fingerprint\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE UNIQUE INDEX `idx_authOrigins_unique_pairs` ON `_authOrigins` (collectionRef, recordRef, fingerprint)\"\n      ],\n      \"system\": true\n    },\n    {\n      \"id\": \"pbc_3142635823\",\n      \"listRule\": null,\n      \"viewRule\": null,\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": null,\n      \"name\": \"_superusers\",\n      \"type\": \"auth\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"cost\": 0,\n          \"hidden\": true,\n          \"id\": \"password901924565\",\n          \"max\": 0,\n          \"min\": 8,\n          \"name\": \"password\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"password\"\n        },\n        {\n          \"autogeneratePattern\": \"[a-zA-Z0-9]{50}\",\n          \"hidden\": true,\n          \"id\": \"text2504183744\",\n          \"max\": 60,\n          \"min\": 30,\n          \"name\": \"tokenKey\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"exceptDomains\": null,\n          \"hidden\": false,\n          \"id\": \"email3885137012\",\n          \"name\": \"email\",\n          \"onlyDomains\": null,\n          \"presentable\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"email\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"bool1547992806\",\n          \"name\": \"emailVisibility\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": true,\n          \"type\": \"bool\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"bool256245529\",\n          \"name\": \"verified\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": true,\n          \"type\": \"bool\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": true,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE UNIQUE INDEX `idx_tokenKey_pbc_3142635823` ON `_superusers` (`tokenKey`)\",\n        \"CREATE UNIQUE INDEX `idx_email_pbc_3142635823` ON `_superusers` (`email`) WHERE `email` != ''\"\n      ],\n      \"system\": true,\n      \"authRule\": \"\",\n      \"manageRule\": null,\n      \"authAlert\": {\n        \"enabled\": true,\n        \"emailTemplate\": {\n          \"subject\": \"Login from a new location\",\n          \"body\": \"<p>Hello,</p>\\n<p>We noticed a login to your {APP_NAME} account from a new location.</p>\\n<p>If this was you, you may disregard this email.</p>\\n<p><strong>If this wasn't you, you should immediately change your {APP_NAME} account password to revoke access from all other locations.</strong></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n        }\n      },\n      \"oauth2\": {\n        \"mappedFields\": {\n          \"id\": \"\",\n          \"name\": \"\",\n          \"username\": \"\",\n          \"avatarURL\": \"\"\n        },\n        \"enabled\": false\n      },\n      \"passwordAuth\": {\n        \"enabled\": true,\n        \"identityFields\": [\n          \"email\"\n        ]\n      },\n      \"mfa\": {\n        \"enabled\": false,\n        \"duration\": 1800,\n        \"rule\": \"\"\n      },\n      \"otp\": {\n        \"enabled\": false,\n        \"duration\": 180,\n        \"length\": 8,\n        \"emailTemplate\": {\n          \"subject\": \"OTP for {APP_NAME}\",\n          \"body\": \"<p>Hello,</p>\\n<p>Your one-time password is: <strong>{OTP}</strong></p>\\n<p><i>If you didn't ask for the one-time password, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n        }\n      },\n      \"authToken\": {\n        \"duration\": 86400\n      },\n      \"passwordResetToken\": {\n        \"duration\": 1800\n      },\n      \"emailChangeToken\": {\n        \"duration\": 1800\n      },\n      \"verificationToken\": {\n        \"duration\": 259200\n      },\n      \"fileToken\": {\n        \"duration\": 180\n      },\n      \"verificationTemplate\": {\n        \"subject\": \"Verify your {APP_NAME} email\",\n        \"body\": \"<p>Hello,</p>\\n<p>Thank you for joining us at {APP_NAME}.</p>\\n<p>Click on the button below to verify your email address.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Verify</a>\\n</p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      },\n      \"resetPasswordTemplate\": {\n        \"subject\": \"Reset your {APP_NAME} password\",\n        \"body\": \"<p>Hello,</p>\\n<p>Click on the button below to reset your password.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-password-reset/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Reset password</a>\\n</p>\\n<p><i>If you didn't ask to reset your password, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      },\n      \"confirmEmailChangeTemplate\": {\n        \"subject\": \"Confirm your {APP_NAME} new email address\",\n        \"body\": \"<p>Hello,</p>\\n<p>Click on the button below to confirm your new email address.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-email-change/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Confirm new email</a>\\n</p>\\n<p><i>If you didn't ask to change your email address, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      }\n    },\n    {\n      \"id\": \"_pb_users_auth_\",\n      \"listRule\": \"id = @request.auth.id\",\n      \"viewRule\": \"id = @request.auth.id\",\n      \"createRule\": \"\",\n      \"updateRule\": \"id = @request.auth.id\",\n      \"deleteRule\": \"id = @request.auth.id\",\n      \"name\": \"users\",\n      \"type\": \"auth\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"cost\": 0,\n          \"hidden\": true,\n          \"id\": \"password901924565\",\n          \"max\": 0,\n          \"min\": 8,\n          \"name\": \"password\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"password\"\n        },\n        {\n          \"autogeneratePattern\": \"[a-zA-Z0-9]{50}\",\n          \"hidden\": true,\n          \"id\": \"text2504183744\",\n          \"max\": 60,\n          \"min\": 30,\n          \"name\": \"tokenKey\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"exceptDomains\": null,\n          \"hidden\": false,\n          \"id\": \"email3885137012\",\n          \"name\": \"email\",\n          \"onlyDomains\": null,\n          \"presentable\": false,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"email\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"bool1547992806\",\n          \"name\": \"emailVisibility\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": true,\n          \"type\": \"bool\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"bool256245529\",\n          \"name\": \"verified\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": true,\n          \"type\": \"bool\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text1579384326\",\n          \"max\": 255,\n          \"min\": 0,\n          \"name\": \"name\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"file376926767\",\n          \"maxSelect\": 1,\n          \"maxSize\": 0,\n          \"mimeTypes\": [\n            \"image/jpeg\",\n            \"image/png\",\n            \"image/svg+xml\",\n            \"image/gif\",\n            \"image/webp\"\n          ],\n          \"name\": \"avatar\",\n          \"presentable\": false,\n          \"protected\": false,\n          \"required\": false,\n          \"system\": false,\n          \"thumbs\": null,\n          \"type\": \"file\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [\n        \"CREATE UNIQUE INDEX `idx_tokenKey__pb_users_auth_` ON `users` (`tokenKey`)\",\n        \"CREATE UNIQUE INDEX `idx_email__pb_users_auth_` ON `users` (`email`) WHERE `email` != ''\"\n      ],\n      \"system\": false,\n      \"authRule\": \"\",\n      \"manageRule\": null,\n      \"authAlert\": {\n        \"enabled\": true,\n        \"emailTemplate\": {\n          \"subject\": \"Login from a new location\",\n          \"body\": \"<p>Hello,</p>\\n<p>We noticed a login to your {APP_NAME} account from a new location.</p>\\n<p>If this was you, you may disregard this email.</p>\\n<p><strong>If this wasn't you, you should immediately change your {APP_NAME} account password to revoke access from all other locations.</strong></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n        }\n      },\n      \"oauth2\": {\n        \"mappedFields\": {\n          \"id\": \"\",\n          \"name\": \"name\",\n          \"username\": \"\",\n          \"avatarURL\": \"avatar\"\n        },\n        \"enabled\": false\n      },\n      \"passwordAuth\": {\n        \"enabled\": true,\n        \"identityFields\": [\n          \"email\"\n        ]\n      },\n      \"mfa\": {\n        \"enabled\": false,\n        \"duration\": 1800,\n        \"rule\": \"\"\n      },\n      \"otp\": {\n        \"enabled\": false,\n        \"duration\": 180,\n        \"length\": 8,\n        \"emailTemplate\": {\n          \"subject\": \"OTP for {APP_NAME}\",\n          \"body\": \"<p>Hello,</p>\\n<p>Your one-time password is: <strong>{OTP}</strong></p>\\n<p><i>If you didn't ask for the one-time password, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n        }\n      },\n      \"authToken\": {\n        \"duration\": 604800\n      },\n      \"passwordResetToken\": {\n        \"duration\": 1800\n      },\n      \"emailChangeToken\": {\n        \"duration\": 1800\n      },\n      \"verificationToken\": {\n        \"duration\": 259200\n      },\n      \"fileToken\": {\n        \"duration\": 180\n      },\n      \"verificationTemplate\": {\n        \"subject\": \"Verify your {APP_NAME} email\",\n        \"body\": \"<p>Hello,</p>\\n<p>Thank you for joining us at {APP_NAME}.</p>\\n<p>Click on the button below to verify your email address.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-verification/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Verify</a>\\n</p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      },\n      \"resetPasswordTemplate\": {\n        \"subject\": \"Reset your {APP_NAME} password\",\n        \"body\": \"<p>Hello,</p>\\n<p>Click on the button below to reset your password.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-password-reset/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Reset password</a>\\n</p>\\n<p><i>If you didn't ask to reset your password, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      },\n      \"confirmEmailChangeTemplate\": {\n        \"subject\": \"Confirm your {APP_NAME} new email address\",\n        \"body\": \"<p>Hello,</p>\\n<p>Click on the button below to confirm your new email address.</p>\\n<p>\\n  <a class=\\\"btn\\\" href=\\\"{APP_URL}/_/#/auth/confirm-email-change/{TOKEN}\\\" target=\\\"_blank\\\" rel=\\\"noopener\\\">Confirm new email</a>\\n</p>\\n<p><i>If you didn't ask to change your email address, you can ignore this email.</i></p>\\n<p>\\n  Thanks,<br/>\\n  {APP_NAME} team\\n</p>\"\n      }\n    },\n    {\n      \"id\": \"pbc_725385852\",\n      \"listRule\": \"\",\n      \"viewRule\": \"\",\n      \"createRule\": \"@request.auth.id != \\\"\\\"\",\n      \"updateRule\": \"@request.auth.id != \\\"\\\"\",\n      \"deleteRule\": \"@request.auth.id != \\\"\\\"\",\n      \"name\": \"inboxes\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text770105660\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"chatId\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"convertURLs\": false,\n          \"hidden\": false,\n          \"id\": \"editor3065852031\",\n          \"maxSize\": 0,\n          \"name\": \"message\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"editor\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text2764284122\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"messageId\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"date2782324286\",\n          \"max\": \"\",\n          \"min\": \"\",\n          \"name\": \"timestamp\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"date\"\n        },\n        {\n          \"cascadeDelete\": false,\n          \"collectionId\": \"pbc_520427368\",\n          \"hidden\": false,\n          \"id\": \"relation1593854671\",\n          \"maxSelect\": 1,\n          \"minSelect\": 0,\n          \"name\": \"sender\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"relation\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"select105650625\",\n          \"maxSelect\": 1,\n          \"name\": \"category\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"select\",\n          \"values\": [\n            \"love-your-content\",\n            \"collab-proposal\"\n          ]\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"bool1985015592\",\n          \"name\": \"isFromMe\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"bool\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [],\n      \"system\": false\n    },\n    {\n      \"id\": \"pbc_520427368\",\n      \"listRule\": \"@request.auth.id != \\\"\\\"\",\n      \"viewRule\": \"@request.auth.id != \\\"\\\"\",\n      \"createRule\": \"@request.auth.id != \\\"\\\"\",\n      \"updateRule\": \"@request.auth.id != \\\"\\\"\",\n      \"deleteRule\": null,\n      \"name\": \"people\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"exceptDomains\": null,\n          \"hidden\": false,\n          \"id\": \"url869342508\",\n          \"name\": \"linkedinUrl\",\n          \"onlyDomains\": null,\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"url\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text1579384326\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"firstName\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"cascadeDelete\": false,\n          \"collectionId\": \"pbc_725385852\",\n          \"hidden\": false,\n          \"id\": \"relation1542800728\",\n          \"maxSelect\": 999,\n          \"minSelect\": 0,\n          \"name\": \"messages\",\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"relation\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"number2215181735\",\n          \"max\": null,\n          \"min\": null,\n          \"name\": \"followers\",\n          \"onlyInt\": false,\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"number\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text2434144904\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"lastName\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"exceptDomains\": null,\n          \"hidden\": false,\n          \"id\": \"url376926767\",\n          \"name\": \"avatar\",\n          \"onlyDomains\": null,\n          \"presentable\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"url\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [],\n      \"system\": false\n    },\n    {\n      \"id\": \"pbc_321265102\",\n      \"listRule\": null,\n      \"viewRule\": null,\n      \"createRule\": null,\n      \"updateRule\": null,\n      \"deleteRule\": null,\n      \"name\": \"textSnippets\",\n      \"type\": \"base\",\n      \"fields\": [\n        {\n          \"autogeneratePattern\": \"[a-z0-9]{15}\",\n          \"hidden\": false,\n          \"id\": \"text3208210256\",\n          \"max\": 15,\n          \"min\": 15,\n          \"name\": \"id\",\n          \"pattern\": \"^[a-z0-9]+$\",\n          \"presentable\": false,\n          \"primaryKey\": true,\n          \"required\": true,\n          \"system\": true,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text1579384326\",\n          \"max\": 128,\n          \"min\": 0,\n          \"name\": \"name\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": true,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"autogeneratePattern\": \"\",\n          \"hidden\": false,\n          \"id\": \"text494360628\",\n          \"max\": 0,\n          \"min\": 0,\n          \"name\": \"value\",\n          \"pattern\": \"\",\n          \"presentable\": false,\n          \"primaryKey\": false,\n          \"required\": false,\n          \"system\": false,\n          \"type\": \"text\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate2990389176\",\n          \"name\": \"created\",\n          \"onCreate\": true,\n          \"onUpdate\": false,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        },\n        {\n          \"hidden\": false,\n          \"id\": \"autodate3332085495\",\n          \"name\": \"updated\",\n          \"onCreate\": true,\n          \"onUpdate\": true,\n          \"presentable\": false,\n          \"system\": false,\n          \"type\": \"autodate\"\n        }\n      ],\n      \"indexes\": [],\n      \"system\": false\n    }\n  ],\n  \"deleteMissing\": true\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          260,
          0
        ],
        "id": "01c2930c-f14a-4390-abb3-be90cb084bfe",
        "name": "Import Collection",
        "onError": "continueErrorOutput"
      },
      {
        "parameters": {
          "respondWith": "json",
          "responseBody": "{\n  \"response\": \"success\"\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.1,
        "position": [
          1360,
          280
        ],
        "id": "e4315851-c2c7-46c7-8f61-1b7cedc2af34",
        "name": "Respond success"
      },
      {
        "parameters": {
          "respondWith": "json",
          "responseBody": "{\n  \"response\": \"error\"\n}",
          "options": {
            "responseCode": 500
          }
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.1,
        "position": [
          1360,
          540
        ],
        "id": "41d8b7ca-1206-4d85-bf75-b321a4413dc5",
        "name": "Respond with error"
      },
      {
        "parameters": {
          "respondWith": "json",
          "responseBody": "{\n  \"response\": \"success\"\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.1,
        "position": [
          520,
          -120
        ],
        "id": "f6b5f996-fa96-4b4d-ad21-50981973e6d8",
        "name": "Respond success1"
      },
      {
        "parameters": {
          "respondWith": "json",
          "responseBody": "{\n  \"response\": \"error\"\n}",
          "options": {
            "responseCode": 500
          }
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.1,
        "position": [
          520,
          40
        ],
        "id": "a37cc3e4-e24b-44d3-ac28-53ab2a24be81",
        "name": "Respond with error1"
      },
      {
        "parameters": {
          "jsCode": "let workflowJson = $input.first().json.workflowWithPlaceholders; // Changed from const to let\n\nif (typeof workflowJson !== 'string' || !workflowJson.trim()) {\n  throw new Error('Invalid workflow JSON input: Expected a non-empty string but received ' + typeof workflowJson);\n}\n\nconst replacements = {\n  \"\\*\\*\\*\\*UNIPILE_DSN_URL\\*\\*\\*\\*\": $input.first().json.unipileDsn || '',\n  \"\\*\\*\\*\\*POCKETBASE_BASE_URL\\*\\*\\*\\*\": $input.first().json.pocketbaseUrl || '',\n  \"\\*\\*\\*\\*POCKETBASE_SERVICE_USER_EMAIL\\*\\*\\*\\*\": \"your_service_user_email\", // Replace with actual email if available\n  \"\\*\\*\\*\\*POCKETBASE_SERVICE_USER_PASSWORD\\*\\*\\*\\*\": \"your_service_user_password\" // Replace with actual password if available\n};\n\n// Replace placeholders\nObject.keys(replacements).forEach((placeholder) => {\n  const escapedPlaceholder = placeholder.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&'); // Escape special regex characters\n  workflowJson = workflowJson.replace(new RegExp(escapedPlaceholder, 'g'), replacements[placeholder]);\n});\n\n// Return modified workflow\nreturn [{ workflowJson }];"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          980,
          280
        ],
        "id": "6d3fd468-81d3-478c-8129-d7758bc7934f",
        "name": "swap placeholders in ingress workflow"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "766f4781-fc4c-42d0-856b-99ab2d0a6609",
                "name": "workflowWithPlaceholders",
                "value": "{   \"nodes\": [     {       \"parameters\": {         \"httpMethod\": \"POST\",         \"path\": \"832dd419-4753-4d2f-aff9-dbc165a600b0\",         \"options\": {}       },       \"type\": \"n8n-nodes-base.webhook\",       \"typeVersion\": 2,       \"position\": [         -1800,         580       ],       \"id\": \"254195db-a5ee-42d3-a974-cf590985de97\",       \"name\": \"Webhook\",       \"webhookId\": \"832dd419-4753-4d2f-aff9-dbc165a600b0\",       \"notes\": \"## LinkedIn Message Entry Point\\nReceives messages from LinkedIn via Unipile webhook.\\n\\nExpects payload:\\n```json\\n{\\n  event: 'message_received',\\n  account_id: string,\\n  message: string,\\n  chat_id: string,\\n  attendees: Array<{\\n    attendee_profile_url: string,\\n    attendee_provider_id: string\\n  }>\\n}\\n```\"     },     {       \"parameters\": {         \"method\": \"POST\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/people/records\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"followers\",               \"value\": \"={{ $json.followers }}\"             },             {               \"name\": \"avatar\",               \"value\": \"={{ $json.avatar }}\"             },             {               \"name\": \"lastName\",               \"value\": \"={{ $json.lastName }}\"             },             {               \"name\": \"firstName\",               \"value\": \"={{ $json.firstName }}\"             },             {               \"name\": \"linkedinUrl\",               \"value\": \"={{ $('Webhook').item.json.body.attendees[0].attendee_profile_url }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         480,         620       ],       \"id\": \"4e14ba6e-25c7-46b7-91e8-087a002eddc1\",       \"name\": \"create user\",       \"notes\": \"## Create PocketBase User\\nCreates new user profile in PocketBase.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify collection name matches your PocketBase setup ('people')\"     },     {       \"parameters\": {         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/people/records?filter=(linkedinUrl='{{ $('Webhook').item.json.body.attendees[0].attendee_profile_url }}')\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $json.token }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         -440,         560       ],       \"id\": \"423ba980-c34e-4381-bd4c-c6a7a8a048f6\",       \"name\": \"get user\",       \"notes\": \"## Get User from PocketBase\\nLooks up user by LinkedIn URL in PocketBase.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify filter syntax matches your PocketBase setup\"     },     {       \"parameters\": {         \"conditions\": {           \"options\": {             \"caseSensitive\": true,             \"leftValue\": \"\",             \"typeValidation\": \"strict\",             \"version\": 2           },           \"conditions\": [             {               \"id\": \"6ab40ceb-8e8a-40d6-9372-566ab4a26329\",               \"leftValue\": \"={{ $json.items }}\",               \"rightValue\": \"\",               \"operator\": {                 \"type\": \"array\",                 \"operation\": \"notEmpty\",                 \"singleValue\": true               }             }           ],           \"combinator\": \"and\"         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.if\",       \"typeVersion\": 2.2,       \"position\": [         -260,         560       ],       \"id\": \"32d5d4ff-51bd-41f0-8709-a0ef546f3c77\",       \"name\": \"Check User Exists\",       \"notes\": \"## User Existence Check\\nChecks if the user already exists in our database.\\nRoutes to:\\n- True: Update existing user\\n- False: Create new user profile\"     },     {       \"parameters\": {         \"url\": \"=****UNIPILE_DSN_URL****/api/v1/users/{{ $('Webhook').item.json.body.sender.attendee_provider_id }}\",         \"authentication\": \"genericCredentialType\",         \"genericAuthType\": \"httpHeaderAuth\",         \"sendQuery\": true,         \"queryParameters\": {           \"parameters\": [             {               \"name\": \"account_id\",               \"value\": \"gXVRsr0MRuqmJcLb8qcbYg\"             },             {               \"name\": \"linkedin_sections\",               \"value\": \"*\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         80,         620       ],       \"id\": \"016f73ee-f4b5-4631-bd26-589fd20e1b1f\",       \"name\": \"get profile by id\",       \"credentials\": {         \"httpHeaderAuth\": {           \"id\": \"WZ1O0GSUsmXqHCio\",           \"name\": \"Unipile (devrel-linkedout)\"         }       },       \"onError\": \"continueRegularOutput\",       \"notes\": \"## Fetch LinkedIn Profile\\nRetrieves user profile data from Unipile API.\\n\\n⚠️ Configuration Required:\\n1. Set up Unipile credentials\\n2. Update account_id parameter to your LinkedIn account ID\\n3. Configure httpHeaderAuth with your Unipile API key\"     },     {       \"parameters\": {         \"method\": \"POST\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/inboxes/records\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"chatId\",               \"value\": \"={{ $('Webhook').item.json.body.chat_id }}\"             },             {               \"name\": \"message\",               \"value\": \"={{ $('Webhook').item.json.body.message }}\"             },             {               \"name\": \"messageId\",               \"value\": \"={{ $('Webhook').item.json.body.message_id }}\"             },             {               \"name\": \"timestamp\",               \"value\": \"={{ $('Webhook').item.json.body.timestamp }}\"             },             {               \"name\": \"sender\",               \"value\": \"={{ $json.items[0].id }}\"             },             {               \"name\": \"isFromMe\",               \"value\": \"={{ $('isFromMe').item.json.isFromMe }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         80,         380       ],       \"id\": \"e663654f-35d3-48be-bad1-ce7a6cfd67a8\",       \"name\": \"Store Existing User Message\",       \"notes\": \"## Store Message (Existing User)\\nSaves message to PocketBase for existing user.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify 'inboxes' collection exists\"     },     {       \"parameters\": {         \"method\": \"POST\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/inboxes/records\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"chatId\",               \"value\": \"={{ $('Webhook').item.json.body.chat_id }}\"             },             {               \"name\": \"message\",               \"value\": \"={{ $('Webhook').item.json.body.message }}\"             },             {               \"name\": \"messageId\",               \"value\": \"={{ $('Webhook').item.json.body.message_id }}\"             },             {               \"name\": \"timestamp\",               \"value\": \"={{ $('Webhook').item.json.body.timestamp }}\"             },             {               \"name\": \"sender\",               \"value\": \"={{ $json.id }}\"             },             {               \"name\": \"isFromMe\",               \"value\": \"={{ $('isFromMe').item.json.isFromMe }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         680,         620       ],       \"id\": \"d29b86a5-4372-40f3-8f3f-bc78f562de13\",       \"name\": \"Store New User Message\",       \"notes\": \"## Store Message (New User)\\nSaves message to PocketBase for new user.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify 'inboxes' collection exists\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"363de654-f3fe-4025-a82f-00881fe8bcbf\",               \"name\": \"followers\",               \"value\": \"={{ $json.follower_count }}\",               \"type\": \"number\"             },             {               \"id\": \"032ad043-5558-4787-aaef-918c6ddd38b5\",               \"name\": \"lastName\",               \"value\": \"={{ $json.last_name }}\",               \"type\": \"string\"             },             {               \"id\": \"9d0b89c6-5b2f-483e-bf39-86d2ffebb963\",               \"name\": \"firstName\",               \"value\": \"={{ $json.first_name }}\",               \"type\": \"string\"             },             {               \"id\": \"551372e9-a0f2-4a24-9d46-9a3e25576701\",               \"name\": \"avatar\",               \"value\": \"={{ $json.profile_picture_url }}\",               \"type\": \"string\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         280,         620       ],       \"id\": \"68d16996-efac-4d23-a3d4-2319be8b72d3\",       \"name\": \"set profile\",       \"notes\": \"## Format User Profile\\nFormats LinkedIn profile data for PocketBase storage.\\nMaps fields:\\n- follower_count → followers\\n- first_name → firstName\\n- last_name → lastName\\n- profile_picture_url → avatar\"     },     {       \"parameters\": {         \"method\": \"PATCH\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/people/records/{{ $('Check User Exists').item.json.items[0].id }}\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"={{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"messages\",               \"value\": \"={{ JSON.stringify( $json.messages ) }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         540,         380       ],       \"id\": \"ca0927a7-fde9-48f8-b461-d1e8ab07e412\",       \"name\": \"update_user\",       \"notes\": \"## Update User Messages\\nUpdates user's message history in PocketBase.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify PATCH endpoint matches your setup\\n3. Ensure messages field exists in people collection\"     },     {       \"parameters\": {         \"method\": \"PATCH\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/people/records/{{ $('create user').item.json.id }}\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"messages\",               \"value\": \"=[\\\"{{ $json.id }}\\\"] \"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         860,         620       ],       \"id\": \"039e05c1-ef55-4773-8aa8-e94c83d1c789\",       \"name\": \"update_user1\",       \"notes\": \"## Initialize User Messages\\nSets initial message array for new user.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify PATCH endpoint matches your setup\\n3. Ensure messages field exists in people collection\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"ec395eb7-1db8-4258-97ca-9b48b386a8cd\",               \"name\": \"messages\",               \"value\": \"={{ $('Check User Exists').item.json.items[0].messages.append($json.id) }}\",               \"type\": \"array\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         300,         380       ],       \"id\": \"02c76f8b-6e98-4f60-808c-a0fba84af2a7\",       \"name\": \"Edit Fields1\"     },     {       \"parameters\": {         \"inputText\": \"={{ $('Webhook').item.json.body.message }}\",         \"categories\": {           \"categories\": [             {               \"category\": \"love-your-content\",               \"description\": \"Choose this category when the Text to Classify is regarding an initial outreach and consists mainly of complimenting work done on The Studio (aka n8n studio), The Studio Update, Flowgramming. Text may also refer to it as \\\"your videos\\\" or \\\"your content\\\".  Here is an example input text:\\n thanks for your videos teaching us n8n .I'm new learner of n8n and happy to connect with you ,Max.\"             },             {               \"category\": \"collab-proposal\",               \"description\": \"Choose this category when the Text to Classify includes an offer for collaboration. This could include exploring a potenital collaboration, partnership, interview on their show etc. Here is an example input text: \\nn8n Collab with No-code PH Hi Max, I'm Crystal from No-code PH. Where can I send an email for a potential collab? We're doing a workflow automation talk (online only) on Feb 17th, hope we can work on something together.\"             }           ]         },         \"options\": {           \"fallback\": \"other\"         }       },       \"type\": \"@n8n/n8n-nodes-langchain.textClassifier\",       \"typeVersion\": 1,       \"position\": [         1100,         620       ],       \"id\": \"2b1df232-4155-46f8-b14a-53e6ea6ba373\",       \"name\": \"Text Classifier\",       \"alwaysOutputData\": false,       \"notes\": \"## Message Classification\\nClassifies messages using AI into categories:\\n- love-your-content\\n- collab-proposal\\n- other\\n\\n⚠️ Configuration Required:\\n1. Review and adjust category descriptions\\n2. Add/modify categories as needed\\n3. Configure fallback category\"     },     {       \"parameters\": {         \"model\": \"claude-3-haiku-20240307\",         \"options\": {}       },       \"type\": \"@n8n/n8n-nodes-langchain.lmChatAnthropic\",       \"typeVersion\": 1.2,       \"position\": [         1100,         820       ],       \"id\": \"204ae0fe-1fe6-42c7-9ba2-9cb79b711a12\",       \"name\": \"Anthropic Chat Model\",       \"credentials\": {         \"anthropicApi\": {           \"id\": \"VN0XNDKVfMKoscWz\",           \"name\": \"devrel-workspace (max@n8n)\"         }       },       \"notes\": \"## AI Message Classification\\nUses Claude to classify incoming messages.\\n\\n⚠️ Configuration Required:\\n1. Set up Anthropic API credentials\\n2. Optionally adjust model version\\n3. Configure classification categories in Text Classifier node\"     },     {       \"parameters\": {         \"method\": \"PATCH\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/inboxes/records/{{ $('Store New User Message').item.json.id }}\",         \"sendHeaders\": true,         \"headerParameters\": {           \"parameters\": [             {               \"name\": \"Authorization\",               \"value\": \"=Bearer {{ $('signin').item.json.token }}\"             }           ]         },         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"category\",               \"value\": \"={{ $json.categoryToAdd }}\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         1840,         540       ],       \"id\": \"da766043-2390-4554-8190-abf7113424ac\",       \"name\": \"Append tag\",       \"notes\": \"## Update Message Category\\nAdds classification category to message in PocketBase.\\n\\n⚠️ Configuration Required:\\n1. Update URL to your PocketBase instance\\n2. Verify PATCH endpoint matches your PocketBase setup\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"95498f49-d4dd-494b-95eb-40f2225542c6\",               \"name\": \"categoryToAdd\",               \"value\": \"love-your-content\",               \"type\": \"string\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         1560,         440       ],       \"id\": \"50a751c8-548a-4c12-9eed-b78eabc22807\",       \"name\": \"love-your-content\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"e098fe22-7e12-43cb-9786-99c3665061b1\",               \"name\": \"categoryToAdd\",               \"value\": \"collab-proposal\",               \"type\": \"string\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         1560,         640       ],       \"id\": \"8f24f276-4c80-42ba-a9ed-be17401b4b93\",       \"name\": \"collab proposal\"     },     {       \"parameters\": {},       \"type\": \"n8n-nodes-base.noOp\",       \"typeVersion\": 1,       \"position\": [         1560,         860       ],       \"id\": \"d046f0b1-12f2-4489-9ab5-eab652c47a12\",       \"name\": \"No tag to add. Stop\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"689bf203-1a3e-4937-abf1-452a558978b7\",               \"name\": \"isFromMe\",               \"value\": false,               \"type\": \"boolean\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         -940,         700       ],       \"id\": \"aa6d60d6-85a7-4995-83d6-fec103b3dd60\",       \"name\": \"NOTFromMe\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"689bf203-1a3e-4937-abf1-452a558978b7\",               \"name\": \"isFromMe\",               \"value\": true,               \"type\": \"boolean\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         -940,         460       ],       \"id\": \"7390321d-2f56-4768-8802-df0b79bb7a4a\",       \"name\": \"FromMe\"     },     {       \"parameters\": {         \"assignments\": {           \"assignments\": [             {               \"id\": \"4fa61395-4afe-4f94-9bd9-3543e5d4738b\",               \"name\": \"isFromMe\",               \"value\": \"={{ $json.isFromMe }}\",               \"type\": \"boolean\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.set\",       \"typeVersion\": 3.4,       \"position\": [         -760,         560       ],       \"id\": \"7299659b-d319-4bf5-a2b6-bcdd0266e837\",       \"name\": \"isFromMe\"     },     {       \"parameters\": {         \"rules\": {           \"values\": [             {               \"conditions\": {                 \"options\": {                   \"caseSensitive\": true,                   \"leftValue\": \"\",                   \"typeValidation\": \"strict\",                   \"version\": 2                 },                 \"conditions\": [                   {                     \"id\": \"cd89bfa5-ea8b-4e5f-b0c9-3f4f12411396\",                     \"leftValue\": \"={{ $json.body.content }}\",                     \"rightValue\": \"\",                     \"operator\": {                       \"type\": \"string\",                       \"operation\": \"notEmpty\",                       \"singleValue\": true                     }                   }                 ],                 \"combinator\": \"and\"               },               \"renameOutput\": true,               \"outputKey\": \"SENTFROMAPP\"             },             {               \"conditions\": {                 \"options\": {                   \"caseSensitive\": true,                   \"leftValue\": \"\",                   \"typeValidation\": \"strict\",                   \"version\": 2                 },                 \"conditions\": [                   {                     \"leftValue\": \"={{ $json.body.attendees[0].attendee_profile_url }}\",                     \"rightValue\": \"={{ $json.body.sender.attendee_profile_url }}\",                     \"operator\": {                       \"type\": \"string\",                       \"operation\": \"equals\"                     }                   }                 ],                 \"combinator\": \"and\"               },               \"renameOutput\": true,               \"outputKey\": \"NOTFomME\"             },             {               \"conditions\": {                 \"options\": {                   \"caseSensitive\": true,                   \"leftValue\": \"\",                   \"typeValidation\": \"strict\",                   \"version\": 2                 },                 \"conditions\": [                   {                     \"id\": \"87eb6241-c28e-4ff2-812f-9b8e9bcec7ca\",                     \"leftValue\": \"={{ $json.body.attendees[0].attendee_profile_url }}\",                     \"rightValue\": \"={{ $json.body.sender.attendee_profile_url }}\",                     \"operator\": {                       \"type\": \"string\",                       \"operation\": \"notEquals\"                     }                   }                 ],                 \"combinator\": \"and\"               },               \"renameOutput\": true,               \"outputKey\": \"FromME\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.switch\",       \"typeVersion\": 3.2,       \"position\": [         -1360,         580       ],       \"id\": \"4de1e9c8-3de2-4b9e-8c0e-859c4e3fa286\",       \"name\": \"Switch\",       \"notes\": \"## Message Direction Detection\\nDetermines if message is:\\n1. Sent from our app\\n2. From the recipient (NOT from me)\\n3. From me (my message)\\n\\nThis affects how we process and store the message.\"     },     {       \"parameters\": {},       \"type\": \"n8n-nodes-base.noOp\",       \"typeVersion\": 1,       \"position\": [         -1140,         220       ],       \"id\": \"488b560b-ddcd-44ed-89bf-7f437fd82473\",       \"name\": \"No Operation, do nothing\"     },     {       \"parameters\": {         \"method\": \"POST\",         \"url\": \"=****POCKETBASE_BASE_URL****/api/collections/users/auth-with-password\",         \"sendBody\": true,         \"bodyParameters\": {           \"parameters\": [             {               \"name\": \"identity\",               \"value\": \"****POCKETBASE_SERVICE_USER_EMAIL****\"             },             {               \"name\": \"password\",               \"value\": \"****POCKETBASE_SERVICE_USER_PASSWORD****\"             }           ]         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.httpRequest\",       \"typeVersion\": 4.2,       \"position\": [         -600,         560       ],       \"id\": \"40aac4a4-6e9e-493d-a9e4-b7927e3a86e0\",       \"name\": \"signin\",       \"notes\": \"## PocketBase Authentication\\nSigns into PocketBase admin account.\\n\\n⚠️ Configuration Required:\\n1. Set environment variables:\\n   - POCKET_BASE_URL\\n   - POCKET_BASE_EMAIL\\n   - POCKET_BASE_PASSWORD\"     },     {       \"parameters\": {         \"content\": \"## 1. Message Entry and Authentication\\n[Learn more about the Webhook node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.webhook/)\\n\\nThe workflow starts with a webhook that receives LinkedIn messages. It first validates the account and determines if the message is from the user or someone else. This setup ensures we only process relevant LinkedIn messages and handle authentication properly.\",         \"height\": 220,         \"width\": 490,         \"color\": 7       },       \"id\": \"2c1acee0-9456-49e2-88b3-870a7ba2893b\",       \"name\": \"Sticky Note1\",       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         -1840,         220       ],       \"typeVersion\": 1     },     {       \"parameters\": {         \"content\": \"## 2. User Management\\n[Learn more about HTTP Request nodes](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.httprequest/)\\n\\nThis section handles user data in PocketBase. It checks if the sender exists in the database:\\n- If they exist, updates their message history\\n- If they're new, creates a profile by fetching LinkedIn data\\nThis ensures we maintain clean user records and message history.\",         \"height\": 220,         \"width\": 490,         \"color\": 7       },       \"id\": \"efc3f9e3-1b43-459f-92de-b5e9bf6bcf9b\",       \"name\": \"Sticky Note\",       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         -840,         20       ],       \"typeVersion\": 1     },     {       \"parameters\": {         \"content\": \"## 3. Message Processing and Storage\\n[Learn more about the Set node](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/)\\n\\nMessages are processed and stored with:\\n- Message content\\n- Timestamp\\n- Chat ID\\n- Sender information\\n- isFromMe flag\\nThis creates a complete message history for each conversation.\",         \"height\": 260,         \"width\": 550,         \"color\": 7       },       \"id\": \"cd4a64d2-865c-4d18-ae8a-0ed4b5aed1de\",       \"name\": \"Sticky Note2\",       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         0,         0       ],       \"typeVersion\": 1     },     {       \"parameters\": {         \"content\": \"## 4. AI Message Classification\\n[Learn more about LangChain nodes](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/)\\n\\nMessages are automatically categorized using AI into:\\n- love-your-content\\n- collab-proposal\\n- other\\nThis helps in organizing and prioritizing responses.\",         \"height\": 220,         \"width\": 530,         \"color\": 7       },       \"id\": \"c215006a-04ac-4a1b-a9d3-1580c70b03b3\",       \"name\": \"Sticky Note3\",       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         780,         100       ],       \"typeVersion\": 1     },     {       \"parameters\": {         \"content\": \"## 5. Tag Management\\nThe workflow concludes by:\\n- Adding appropriate tags based on AI classification\\n- Updating the message record with the category\\n- Preparing the data for frontend display\\nThis enables better message organization and response handling. \",         \"height\": 200,         \"width\": 530,         \"color\": 7       },       \"id\": \"8866b53c-7f97-4896-ab24-9ef5afe42ae1\",       \"name\": \"Sticky Note4\",       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         1480,         140       ],       \"typeVersion\": 1     },     {       \"parameters\": {         \"content\": \"\\nreplace all PocketBase URLs:\\nhttps://your-pocketbase-instance\\nwith your PocketBase instance URL\\n\\nRequired collections:\\n- people\\n- inboxes\\n- users\",         \"height\": 220,         \"width\": 520       },       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         460,         800       ],       \"typeVersion\": 1,       \"id\": \"1863ed0e-7266-47be-8b75-41d0c01eaafd\",       \"name\": \"PocketBase Collections\"     },     {       \"parameters\": {         \"content\": \"\\nAnthropic Configuration:\\n1. Set up API key in credentials\\n2. Current model: claude-3-haiku-20240307\\n3. Adjust model based on needs\\n\\nClassification categories:\\n- love-your-content\\n- collab-proposal\\n- other\",         \"height\": 240,         \"width\": 400       },       \"type\": \"n8n-nodes-base.stickyNote\",       \"position\": [         1000,         360       ],       \"typeVersion\": 1,       \"id\": \"a9c4f6de-54ce-4950-b190-b6828279d091\",       \"name\": \"AI Configuration\"     },     {       \"parameters\": {         \"conditions\": {           \"options\": {             \"caseSensitive\": true,             \"leftValue\": \"\",             \"typeValidation\": \"strict\",             \"version\": 2           },           \"conditions\": [             {               \"id\": \"9daace63-48e6-4c44-894a-92feabd4868c\",               \"leftValue\": \"={{ $json.body.account_id }}\",               \"rightValue\": \"=gXVRsr0MRuqmJcLb8qcbYg\",               \"operator\": {                 \"type\": \"string\",                 \"operation\": \"equals\",                 \"name\": \"filter.operator.equals\"               }             }           ],           \"combinator\": \"and\"         },         \"options\": {}       },       \"type\": \"n8n-nodes-base.if\",       \"typeVersion\": 2.2,       \"position\": [         -1600,         580       ],       \"id\": \"7797926c-b37b-4d11-8868-049a1984a957\",       \"name\": \"If\",       \"notes\": \"## Account Validation\\nVerifies the message is from the correct LinkedIn account.\\n\\n⚠️ Configuration Required:\\n1. Update rightValue to your Unipile LinkedIn account_id\"     },     {       \"parameters\": {},       \"type\": \"n8n-nodes-base.noOp\",       \"typeVersion\": 1,       \"position\": [         -1500,         760       ],       \"id\": \"f2341405-4f84-40d8-91f5-9e6f369aee52\",       \"name\": \"No Operation, do nothing1\"     }   ],   \"connections\": {     \"Webhook\": {       \"main\": [         [           {             \"node\": \"If\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"create user\": {       \"main\": [         [           {             \"node\": \"Store New User Message\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"get user\": {       \"main\": [         [           {             \"node\": \"Check User Exists\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Check User Exists\": {       \"main\": [         [           {             \"node\": \"Store Existing User Message\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"get profile by id\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"get profile by id\": {       \"main\": [         [           {             \"node\": \"set profile\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Store Existing User Message\": {       \"main\": [         [           {             \"node\": \"Edit Fields1\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Store New User Message\": {       \"main\": [         [           {             \"node\": \"update_user1\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"set profile\": {       \"main\": [         [           {             \"node\": \"create user\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"update_user1\": {       \"main\": [         [           {             \"node\": \"Text Classifier\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Edit Fields1\": {       \"main\": [         [           {             \"node\": \"update_user\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Text Classifier\": {       \"main\": [         [           {             \"node\": \"love-your-content\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"collab proposal\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"No tag to add. Stop\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Anthropic Chat Model\": {       \"ai_languageModel\": [         [           {             \"node\": \"Text Classifier\",             \"type\": \"ai_languageModel\",             \"index\": 0           }         ]       ]     },     \"love-your-content\": {       \"main\": [         [           {             \"node\": \"Append tag\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"collab proposal\": {       \"main\": [         [           {             \"node\": \"Append tag\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"NOTFromMe\": {       \"main\": [         [           {             \"node\": \"isFromMe\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"FromMe\": {       \"main\": [         [           {             \"node\": \"isFromMe\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"isFromMe\": {       \"main\": [         [           {             \"node\": \"signin\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"Switch\": {       \"main\": [         [           {             \"node\": \"No Operation, do nothing\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"NOTFromMe\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"FromMe\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"signin\": {       \"main\": [         [           {             \"node\": \"get user\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     },     \"If\": {       \"main\": [         [           {             \"node\": \"Switch\",             \"type\": \"main\",             \"index\": 0           }         ],         [           {             \"node\": \"No Operation, do nothing1\",             \"type\": \"main\",             \"index\": 0           }         ]       ]     }   },   \"pinData\": {     \"Webhook\": [       {         \"headers\": {           \"host\": \"devrel.app.n8n.cloud\",           \"user-agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 12_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36\",           \"content-length\": \"1121\",           \"accept\": \"application/json, text/plain, */*\",           \"accept-encoding\": \"gzip, br\",           \"accept-language\": \"en-US\",           \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",           \"cf-connecting-ip\": \"51.159.110.129\",           \"cf-ew-via\": \"15\",           \"cf-ipcountry\": \"FR\",           \"cf-ray\": \"917a28b1a6d0d30d-CDG\",           \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",           \"cf-worker\": \"n8n.cloud\",           \"content-type\": \"application/json\",           \"sec-ch-ua\": \"\\\"Not=A?Brand\\\";v=\\\"99\\\", \\\"Chromium\\\";v=\\\"118\\\"\",           \"sec-ch-ua-mobile\": \"?0\",           \"sec-ch-ua-platform\": \"\\\"Linux\\\"\",           \"sec-fetch-dest\": \"empty\",           \"sec-fetch-mode\": \"cors\",           \"sec-fetch-site\": \"cross-site\",           \"x-forwarded-for\": \"51.159.110.129, 172.71.232.86\",           \"x-forwarded-host\": \"devrel.app.n8n.cloud\",           \"x-forwarded-port\": \"443\",           \"x-forwarded-proto\": \"https\",           \"x-forwarded-server\": \"traefik-prod-users-gwc-8-86454fd949-ms967\",           \"x-is-trusted\": \"yes\",           \"x-real-ip\": \"51.159.110.129\"         },         \"params\": {},         \"query\": {},         \"body\": {           \"event\": \"message_received\",           \"account_id\": \"gXVRsr0MRuqmJcLb8qcbYg\",           \"account_type\": \"LINKEDIN\",           \"account_info\": {             \"type\": \"LINKEDIN\",             \"feature\": \"classic\",             \"user_id\": \"ACoAACT0WdIBiuplJ8kgTiB9PJsBe-t9i3gHeLs\"           },           \"webhook_name\": \"linkedout-devrel-instance_message-handler\",           \"chat_id\": \"b16yP0MtWcCeJ7FnaSToQg\",           \"attendees\": [             {               \"attendee_id\": \"KEvBN83nVv2UZUpGP_Addg\",               \"attendee_provider_id\": \"ACoAABVX2ncBH8k01-JK_BbJv7vl4_CF49nyT6Q\",               \"attendee_name\": \"Oumnya Benhassou\",               \"attendee_profile_url\": \"https://www.linkedin.com/in/ACoAABVX2ncBH8k01-JK_BbJv7vl4_CF49nyT6Q\"             }           ],           \"sender\": {             \"attendee_id\": \"KEvBN83nVv2UZUpGP_Addg\",             \"attendee_provider_id\": \"ACoAABVX2ncBH8k01-JK_BbJv7vl4_CF49nyT6Q\",             \"attendee_name\": \"Oumnya Benhassou\",             \"attendee_profile_url\": \"https://www.linkedin.com/in/ACoAABVX2ncBH8k01-JK_BbJv7vl4_CF49nyT6Q\"           },           \"subject\": null,           \"message\": \"ooh yeah i got it :D\",           \"message_id\": \"kcKvbQKmXp-t55whWd59CQ\",           \"timestamp\": \"2025-02-25T19:38:59.979Z\",           \"attachments\": [],           \"provider_chat_id\": \"2-YjQ0YzcyYjgtMmEzNi00MmM0LWFiZDYtNTMxN2E5YzExMTYwXzAxMw==\",           \"provider_message_id\": \"2-MTc0MDUxMjMzOTc3NGIxMTU4Ni0xMDAmYjQ0YzcyYjgtMmEzNi00MmM0LWFiZDYtNTMxN2E5YzExMTYwXzAxMw==\"         },         \"webhookUrl\": \"https://devrel.app.n8n.cloud/webhook/messages\",         \"executionMode\": \"production\"       }     ],     \"get user\": [       {         \"items\": [],         \"page\": 1,         \"perPage\": 30,         \"totalItems\": 0,         \"totalPages\": 0       }     ],     \"signin\": [       {         \"record\": {           \"avatar\": \"\",           \"collectionId\": \"_pb_users_auth_\",           \"collectionName\": \"users\",           \"created\": \"2025-02-25 19:51:29.624Z\",           \"email\": \"max+utility@n8n.io\",           \"emailVisibility\": false,           \"id\": \"ph12y2j2kiv6s80\",           \"name\": \"\",           \"updated\": \"2025-02-25 19:51:29.624Z\",           \"verified\": false         },         \"token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb2xsZWN0aW9uSWQiOiJfcGJfdXNlcnNfYXV0aF8iLCJleHAiOjE3NDExMjA2MzgsImlkIjoicGgxMnkyajJraXY2czgwIiwicmVmcmVzaGFibGUiOnRydWUsInR5cGUiOiJhdXRoIn0.Z861f6zjnVWX14UNk1a0uNcRXMPIx6suwPucbzabwJA\"       }     ]   },   \"meta\": {     \"templateCredsSetupCompleted\": true,     \"instanceId\": \"205b3bc06c96f2dc835b4f00e1cbf9a937a74eeb3b47c99d0c30b0586dbf85aa\"   } }",
                "type": "string"
              },
              {
                "id": "a914a84e-e81c-46ad-a575-c16fda63a130",
                "name": "unipileDsn",
                "value": "={{ $('Create service account').item.json.body.unipileDsn }}",
                "type": "string"
              },
              {
                "id": "11b78dcc-3a07-4f8c-88c8-924ae55b5181",
                "name": "unipileCredentialId",
                "value": "={{ $('Create service account').item.json.body.unipileCredentialId }}",
                "type": "string"
              },
              {
                "id": "995fc11d-a728-4a6d-9b7c-5df22df082b3",
                "name": "pocketbaseUrl",
                "value": "={{ $('Create service account').item.json.body.pocketbaseUrl }}",
                "type": "string"
              }
            ]
          },
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          740,
          280
        ],
        "id": "1a770197-35cb-44bb-9222-d35db33b32c4",
        "name": "Ingress workflow"
      }
    ],
    "connections": {
      "Create tables": {
        "main": [
          [
            {
              "node": "Import Collection",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create service account": {
        "main": [
          [
            {
              "node": "Crypto",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Crypto": {
        "main": [
          [
            {
              "node": "Create n8n user",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create n8n user": {
        "main": [
          [
            {
              "node": "Ingress workflow",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Respond with error",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "n8n": {
        "main": [
          [
            {
              "node": "Respond success",
              "type": "main",
              "index": 0
            }
          ],
          []
        ]
      },
      "Import Collection": {
        "main": [
          [
            {
              "node": "Respond success1",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Respond with error1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "swap placeholders in ingress workflow": {
        "main": [
          [
            {
              "node": "n8n",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Ingress workflow": {
        "main": [
          [
            {
              "node": "swap placeholders in ingress workflow",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "pinData": {
      "Create tables": [
        {
          "headers": {
            "host": "devrel.app.n8n.cloud",
            "user-agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/133.0.0.0 Safari/537.36",
            "content-length": "75",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "accept-language": "en-GB,en-US;q=0.9,en;q=0.8",
            "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb2xsZWN0aW9uSWQiOiJwYmNfMzE0MjYzNTgyMyIsImV4cCI6MTc0MDc3MDQ0OCwiaWQiOiIxZWZ2M284dTJlczg4MjIiLCJyZWZyZXNoYWJsZSI6dHJ1ZSwidHlwZSI6ImF1dGgifQ.hmNjVpEOfSRjulNvjtFF5lcORO6Yc_K9cSGpu4D5EUo",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "2003:ee:5720:e900:d9de:8862:85ee:c4d5",
            "cf-ew-via": "15",
            "cf-ipcountry": "DE",
            "cf-ray": "918a88cb32efecbc-WAW",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json",
            "origin": "http://localhost:3000",
            "priority": "u=1, i",
            "referer": "http://localhost:3000/",
            "sec-ch-ua": "\"Not(A:Brand\";v=\"99\", \"Google Chrome\";v=\"133\", \"Chromium\";v=\"133\"",
            "sec-ch-ua-mobile": "?0",
            "sec-ch-ua-platform": "\"macOS\"",
            "sec-fetch-dest": "empty",
            "sec-fetch-mode": "cors",
            "sec-fetch-site": "cross-site",
            "x-forwarded-for": "2003:ee:5720:e900:d9de:8862:85ee:c4d5, 162.158.103.36",
            "x-forwarded-host": "devrel.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-8-86454fd949-b5x2m",
            "x-is-trusted": "yes",
            "x-real-ip": "2003:ee:5720:e900:d9de:8862:85ee:c4d5"
          },
          "params": {},
          "query": {},
          "body": {
            "pocketbaseUrl": "https://pocketbase-odxgerpo.az-csprod1.cloud-station.io"
          },
          "webhookUrl": "https://devrel.app.n8n.cloud/webhook/linkedout/setup/db-tables",
          "executionMode": "production"
        }
      ],
      "Create service account": [
        {
          "headers": {
            "host": "devrel.app.n8n.cloud",
            "user-agent": "node",
            "content-length": "155",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "accept-language": "*",
            "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb2xsZWN0aW9uSWQiOiJwYmNfMzE0MjYzNTgyMyIsImV4cCI6MTc0MDc3OTI2MiwiaWQiOiIxZWZ2M284dTJlczg4MjIiLCJyZWZyZXNoYWJsZSI6dHJ1ZSwidHlwZSI6ImF1dGgifQ.srhO5fXYYhsIWMwzVSxuwfZ8VzdRpDswXVfl5YnZF3Y",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "2003:ee:5720:e900:d9de:8862:85ee:c4d5",
            "cf-ew-via": "15",
            "cf-ipcountry": "DE",
            "cf-ray": "918b5ff927504522-TXL",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json",
            "sec-fetch-mode": "cors",
            "x-forwarded-for": "2003:ee:5720:e900:d9de:8862:85ee:c4d5, 162.158.112.178",
            "x-forwarded-host": "devrel.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-8-86454fd949-b5x2m",
            "x-is-trusted": "yes",
            "x-n8n-api-key": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3ZjA3Y2FmYS1kNWYyLTQyZGYtOTZhNS1hYjg3NTZjMTg1M2EiLCJpc3MiOiJuOG4iLCJhdWQiOiJwdWJsaWMtYXBpIiwiaWF0IjoxNzQwNjkwMDY1LCJleHAiOjE3NDMyMDI4MDB9.jAvpLPTn30EsH6uaP6RNFjw_f4vL56_ecrzChFh90Wo",
            "x-real-ip": "2003:ee:5720:e900:d9de:8862:85ee:c4d5"
          },
          "params": {},
          "query": {},
          "body": {
            "pocketbaseUrl": "https://pocketbase-odxgerpo.az-csprod1.cloud-station.io",
            "unipileCredentialId": "2UGlgDOS7CcLZMfn",
            "unipileDsn": "api11.unipile.com:14107"
          },
          "webhookUrl": "https://devrel.app.n8n.cloud/webhook/linkedout/setup/service-user",
          "executionMode": "production"
        }
      ],
      "Create n8n user": [
        {
          "avatar": "",
          "collectionId": "_pb_users_auth_",
          "collectionName": "users",
          "created": "2025-02-27 22:24:04.627Z",
          "email": "linkedout-service-user@n8n.io",
          "emailVisibility": true,
          "id": "99gpt3l4aagb4aj",
          "name": "linkedout-service-user",
          "updated": "2025-02-27 22:24:04.627Z",
          "verified": true
        }
      ]
    },
    "meta": {
      "templateCredsSetupCompleted": true,
      "instanceId": "205b3bc06c96f2dc835b4f00e1cbf9a937a74eeb3b47c99d0c30b0586dbf85aa"
    }
  }